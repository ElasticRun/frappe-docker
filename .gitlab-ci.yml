variables:
  KAFKA_CONFIG: '{
  "auto.offset.reset": "smallest",
  "bootstrap.servers": "spine.ntex.com:10180",
  "client.id": "er-frappe-docker",
  "default.topic.config": {
   "acks": "all"
  },
  "fetch.message.max.bytes": "81920",
  "group.id": "er-frappe-docker-spine-client",
  "request.required.acks": "1"
 }'
dev-erfrappe-deploy:
  stage: deploy
  script:
    - pwd
    - ./build-frappe10.sh dev
    - ./build-frappe11.sh dev
    - docker push dock.elasticrun.in/er-frappe10-base:dev
    - docker push dock.elasticrun.in/er-frappe11-base:dev
  only:
    - develop
    - master
  tags:
    - build-srv


beta-erfrappe-deploy:
  stage: deploy
  script:
    - pwd
    - ./build-frappe10.sh beta
    - ./build-frappe11.sh beta
    - docker push dock.elasticrun.in/er-frappe10-base:beta
    - docker push dock.elasticrun.in/er-frappe11-base:beta
  only:
    - beta-release
  tags:
    - build-srv
    - beta

prod-erfrappe-deploy:
  stage: deploy
  script:
    - pwd
    - ./build-frappe10.sh release
    - ./build-frappe11.sh release
    - docker push dock.elasticrun.in/er-frappe10-base:release
    - docker push dock.elasticrun.in/er-frappe11-base:release
  only:
    - release
    - prod
  tags:
    - prod
    - release
